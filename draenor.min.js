/*
*  Copyright 2013-12-11
*  Author wenren
*  依赖zepto.js
*/
!function(a){a.browser={IE:!(!window.attachEvent||-1!==navigator.userAgent.indexOf("Opera")),Opera:navigator.userAgent.indexOf("Opera")>-1,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&-1===navigator.userAgent.indexOf("KHTML"),MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/),android:navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1},a.webPageReg={body:/<body[^>]*>([\s\S]*)<\/body>/i,style:/<style[^>]*>([\s\S]*)<\/style>/i,script:/<script\b[^<]*(?:(?!<\/script)<[^>]*)*<\/script>/gi}}(Zepto);
!function(a){var b=function(b,c,d){if("undefined"==typeof c){var e=null;if(document.cookie&&""!=document.cookie)for(var f=document.cookie.split(";"),g=0;g<f.length;g++){var h=a.trim(f[g]);if(h.substring(0,b.length+1)==b+"="){e=decodeURIComponent(h.substring(b.length+1));break}}return e}d=d||{},null===c&&(c="",d=a.extend({},d),d.expires=-1);var i="";if(d.expires&&("number"==typeof d.expires||d.expires.toUTCString)){var j;"number"==typeof d.expires?(j=new Date,j.setTime(j.getTime()+60*d.expires*60*1e3)):j=d.expires,i="; expires="+j.toUTCString()}var k=d.path?"; path="+d.path:"",l=d.domain?"; domain="+d.domain:"",m=d.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(c),i,k,l,m].join("")};a.cookie={setCookie:function(a,c,d){var e=d;void 0===e&&(e={path:"/",expires:1}),b(a,c,d)},getCookie:function(a){return void 0===a?null:b(a)},deleteCookie:function(b){var c=new Date;c.setTime(c.getTime()-864e5),a.cookie.setCookie(b,"",c)},isExists:function(b){var c=a.cookie.getCookie(b);try{return"string"===a.type(c)?0!==c.length?!0:!1:!1}catch(d){console.info("error"+d)}}},a.gotoPage=function(a){window.location.href=a}}(Zepto);
!function(a){var b=a("body"),c='<div id="backdrop" class="modal-backdrop fade in" style="display:none;"></div>';b.append(c);var d=a("#backdrop"),e=function(a,b){this.options=b};e.prototype={constructor:e,show:function(){d.show(),this.show()},hide:function(){d.hide(),this.hide()}},a.fn.dialog=function(b){return this.each(function(){var c=a(this),d=c.data("dialog");d||c.data("dialog",d=new e(c,b)),"string"==typeof b&&d[b].call(c)})},a.fn.dialog.Constructor=e}(Zepto);
!function(a){var b,c=localStorage,d=[],e=sessionStorage,f=function(c,e){var f=c;b=0,f.forEach(function(a){d.push({status:0,location:a,connector:j(a)})}),d.cmdMap={},window.addEventListener("message",function(c){var f=c.data;d.cmdMap["message_"+b]=a.parseJSON(f),b===d.length-1&&e(d.cmdMap),b++},!1)},g=function(b,d,f){var g=d;("object"===a.type(d)||"array"===a.type(d))&&(g=JSON.stringify(d)),"boolean"===a.type(f)?e.setItem(b,g):c.setItem(b,g),"function"==typeof f&&f.call(this)},h=function(a,b){return b?e.getItem(a):c.getItem(a)},i=function(a,b){return b?null===e.getItem(a)||void 0===e.getItem(a)?!1:!0:null===c.getItem(a)||void 0===c.getItem(a)?!1:!0},j=function(a){var b=document.createElement("iframe");return b.style.display="none",b.src=a,document.body.appendChild(b),b.contentWindow},k=function(b,c){var d,e=b;e.forEach(function(b,e){d="object"===a.type(c[e])||"array"===a.type(c[e])?JSON.stringify(c[e]):c[e],window.parent.postMessage(d,b)})},l=function(a,b){b?e.removeItem(a):c.removeItem(a)},m=function(a){a?e.clear():c.clear()};a.storage={receiveMessage:f,set:g,get:h,isExists:i,postMessage:k,remove:l,clear:m},a.parseUrl=function(){var a,b=window.location.href,c=/(\?|\#)(.+)/,d=c.exec(b);return a=null!==d?decodeURI(d[2]):!1};var n=function(a){function b(a,b){if(b=b.replace(/\{|\(|\)|\}|-/g,""),b=b.toLowerCase(),32!=b.length||-1!=b.search(/[^0-9,a-f]/i))c(a);else for(var d=0;d<b.length;d++)a.push(b[d])}function c(a){for(var b=32;b--;)a.push("0")}function d(a,b){switch(b){case"N":return a.toString().replace(/,/g,"");case"D":var c=a.slice(0,8)+"-"+a.slice(8,12)+"-"+a.slice(12,16)+"-"+a.slice(16,20)+"-"+a.slice(20,32);return c=c.replace(/,/g,"");case"B":var c=d(a,"D");return c="{"+c+"}";case"P":var c=d(a,"D");return c="("+c+")";default:return new n}}var e=new Array;"string"==typeof a?b(e,a):c(e),this.Equals=function(a){return a&&a.IsGuid?this.ToString()==a.ToString():!1},this.IsGuid=function(){},this.ToString=function(a){return"string"==typeof a?"N"==a||"D"==a||"B"==a||"P"==a?d(e,a):d(e,"D"):d(e,"D")}},o=function(){for(var a="",b=32;b--;)a+=Math.floor(16*Math.random()).toString(16);return new n(a)},p=o();a.guid=p;var q=function(){var b=a("body"),c='<div id="error_backdrop" class="modal-backdrop error_backdrop" style="display:none;"></div><div class="error" id="error_parent" style="display:none;"><h1 id="error_content"></h1></div>';b.append(c);var d=a("#error_backdrop"),e=a("#error_content"),f=a("#error_parent");return{show:function(a){d.show(),e.html(a),f.show()},hide:function(){setTimeout(function(){d.hide(),f.hide()},2e3)}}};a.error=q()}(Zepto);
!function(a){var b=!0,c={},d=function(d,e,f){for(var g=e.input,h=e.options.regx,i=0,j=g.length;j>i;i++){var k=g.eq(i),l=k.val();if(0===l.length){a.error.show(e.defaultmessage),setTimeout(function(){a.error.hide()},2e3),b=!1;break}if(void 0!==h){var m=h[i];if(void 0!==m&&!m.desc){for(var n in m){if(!m[n].test(l)){a.error.show(n),a.error.hide(),b=!1;break}b=!0}if(!b)break}}b=!0,c[k.attr("data-key")]=l}b&&e.options.affairFun.call(d,c,f)},e=function(b,c){this.dom=b,this.id=b.attr("id"),this.options=c,this.input=this.dom.find("input");var e=this.options.type||"tap",f=document.querySelector(this.options.submitElements),g=this;this.defaultmessage=c.defaultmessage||"账户或密码不能为空",a.Hammer(f).on(e,function(a){d(this,g,a)})};a.fn.verification=function(b){return this.each(function(){var c=a(this),d=c.data("verification");d||c.data("verification",d=new e(c,b))})},a.fn.verification.Constructor=e}(Zepto);