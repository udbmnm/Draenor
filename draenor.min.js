/*
*  Copyright 2013-12-17
*  Author wenren
*  Dependent 依赖于zepto.js，mobile端web ui插件*/

!function(a){var b=function(b,c,d){if("undefined"==typeof c){var e=null;if(document.cookie&&""!=document.cookie)for(var f=document.cookie.split(";"),g=0;g<f.length;g++){var h=a.trim(f[g]);if(h.substring(0,b.length+1)==b+"="){e=decodeURIComponent(h.substring(b.length+1));break}}return e}d=d||{},null===c&&(c="",d=a.extend({},d),d.expires=-1);var i="";if(d.expires&&("number"==typeof d.expires||d.expires.toUTCString)){var j;"number"==typeof d.expires?(j=new Date,j.setTime(j.getTime()+60*d.expires*60*1e3)):j=d.expires,i="; expires="+j.toUTCString()}var k=d.path?"; path="+d.path:"",l=d.domain?"; domain="+d.domain:"",m=d.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(c),i,k,l,m].join("")};a.cookie={setCookie:function(a,c,d){var e=d;void 0===e&&(e={path:"/",expires:1}),b(a,c,d)},getCookie:function(a){return void 0===a?null:b(a)},deleteCookie:function(b){var c=new Date;c.setTime(c.getTime()-864e5),a.cookie.setCookie(b,"",c)},isExists:function(b){var c=a.cookie.getCookie(b);try{return"string"===a.type(c)?0!==c.length?!0:!1:!1}catch(d){console.info("error"+d)}}},a.gotoPage=function(a){window.location.href=a}}(Zepto);
!function(a){var b=function(a,b){this.options=b};b.prototype={show:function(){a.DOMcollection.backdrop.show(),this.show()},hide:function(){a.DOMcollection.backdrop.hide(),this.hide()}},a.fn.dialog=function(c){return this.each(function(){var d=a(this),e=d.data("dialog");e||d.data("dialog",e=new b(d,c)),"string"==typeof c&&e[c].call(d)})},a.fn.dialog.Constructor=b}(Zepto);
!function(a){var b=function(b,c,d){a.geolocation={status:b,message:c},"function"==typeof d&&d(a.geolocation)},c=function(c){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.geolocation={latitude:b.coords.latitude,longitude:b.coords.longitude},"function"==typeof c&&c(a.geolocation)},function(a){switch(a.code){case 0:b(0,a.message,c);break;case 1:b(1,a.message,c);break;case 2:b(2,a.message,c);break;case 3:b(3,a.message,c)}})};a.geolocation,a.geolocationSarat=function(a,b){a&&navigator.geolocation&&c(b)}}(Zepto);
!function(a){var b=function(b,c){var d=[],e=parseInt(c.Cnumber),f=c.setData,g=["#fec960","#49b5ed","#e86b66","#3dbc7c","#8794ff"],h=g.length,i=1;f.forEach(function(a,b){var c=Math.floor(parseInt(a.count)/e*100);a.percentage=c+"%",d.push(c),b===h*i&&i++,a.color=h>b?g[b]:g[h-(h*i%b+1)]});var j=a.template.compile(c.template),k=j({anaVote:c.setData});b.html(k),b.show();var l=b.find("div.analyAnimate"),m=new a.animates;d.forEach(function(a,b){var c=l[b];m.concat(c,{width:a+"%"}),m.start()})};a.fn.simpleAnalysis=function(a){new b(this,a)},a.fn.simpleAnalysis.Constructor=b}(Zepto);
!function(a){var b,c=localStorage,d=[],e=sessionStorage,f=window.location;a.PATH={host:"http://"+f.host+"/"},a.DOMcollection={};var g=function(c,e){var f=c;b=0,f.forEach(function(a){d.push({status:0,location:a,connector:k(a)})}),d.cmdMap={},window.addEventListener("message",function(c){var f=c.data;d.cmdMap["message_"+b]=a.parseJSON(f),b===d.length-1&&e(d.cmdMap),b++},!1)},h=function(a,b,d){d?e.setItem(a,b):c.setItem(a,b)},i=function(a,b){return b?e.getItem(a):c.getItem(a)},j=function(a,b){return b?null===e.getItem(a)||void 0===e.getItem(a)?!1:!0:null===c.getItem(a)||void 0===c.getItem(a)?!1:!0},k=function(a){var b=document.createElement("iframe");return b.style.display="none",b.src=a,document.body.appendChild(b),b.contentWindow},l=function(b,c){var d,e=b;e.forEach(function(b,e){d="object"===a.type(c[e])||"array"===a.type(c[e])?JSON.stringify(c[e]):c[e],window.parent.postMessage(d,b)})},m=function(a,b){b?e.removeItem(a):c.removeItem(a)},n=function(a){a?e.clear():c.clear()};a.storage={receiveMessage:g,set:h,get:i,isExists:j,postMessage:l,remove:m,clear:n},a.parseUrl=function(){var a,b=window.location.href,c=/(\?|\#)(.+)/,d=c.exec(b);if(a=null!==d?decodeURI(d[2]):!1,!a)throw new Error("URL解析出错");return a},a.stringify=function(a){return JSON.stringify(a)};var o=function(a){function b(a,b){if(b=b.replace(/\{|\(|\)|\}|-/g,""),b=b.toLowerCase(),32!=b.length||-1!=b.search(/[^0-9,a-f]/i))c(a);else for(var d=0;d<b.length;d++)a.push(b[d])}function c(a){for(var b=32;b--;)a.push("0")}function d(a,b){switch(b){case"N":return a.toString().replace(/,/g,"");case"D":var c=a.slice(0,8)+"-"+a.slice(8,12)+"-"+a.slice(12,16)+"-"+a.slice(16,20)+"-"+a.slice(20,32);return c=c.replace(/,/g,"");case"B":var c=d(a,"D");return c="{"+c+"}";case"P":var c=d(a,"D");return c="("+c+")";default:return new o}}var e=new Array;"string"==typeof a?b(e,a):c(e),this.Equals=function(a){return a&&a.IsGuid?this.ToString()==a.ToString():!1},this.IsGuid=function(){},this.ToString=function(a){return"string"==typeof a?"N"==a||"D"==a||"B"==a||"P"==a?d(e,a):d(e,"D"):d(e,"D")}},p=function(){for(var a="",b=32;b--;)a+=Math.floor(16*Math.random()).toString(16);return new o(a)},q=p();a.guid=q;var r=function(){var b=a("body"),c='<div id="backdrop" class="modal-backdrop fade in" style="display:none;"></div><div class="error" id="error_parent" style="display:none;"><h1 id="error_content"></h1></div>';b.append(c),a.DOMcollection.backdrop=a("#backdrop");var d=a("#error_content"),e=a("#error_parent");return{show:function(b){a.DOMcollection.backdrop.show(),d.html(b),e.show()},hide:function(){setTimeout(function(){a.DOMcollection.backdrop.hide(),e.hide()},2e3)}}};a.error=r()}(Zepto);
!function(a){a.transformX=function(a,b,c,d){var e=a[b],f=e&&e.style;f&&(f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTransform="translate("+c+"px,0)translateZ(0)",f.msTransform=f.MozTransform=f.OTransform="translateX("+c+"px)")},a.transformY=function(a,b,c,d){var e=a[b],f=e&&e.style;f&&(f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTransform="translate(0,"+c+"px)translateZ(0)",f.msTransform=f.MozTransform=f.OTransform="translateY("+c+"px)")}}(Zepto);
!function(a){var b=!0,c={},d=function(d,e,f){for(var g=e.input,h=e.options.regx,i=0,j=g.length;j>i;i++){var k=g.eq(i),l=k.val();if(0===l.length){a.error.show(e.defaultmessage),a.error.hide(),b=!1;break}if(void 0!==h){var m=h[i];if(void 0!==m&&!m.desc){for(var n in m){if(!m[n].test(l)){a.error.show(n),a.error.hide(),b=!1;break}b=!0}if(!b)break}}b=!0,c[k.attr("data-key")]=l}b&&e.options.affairFun.call(d,c,f)},e=function(b,c){this.dom=b,this.id=b.attr("id"),this.options=c,this.input=this.dom.find("input");var e=this.options.type||"tap",f=a(this.options.submitElements),g=this;this.defaultmessage=c.defaultmessage||"账户或密码不能为空",f.on(e,function(a){d(this,g,a)})};a.fn.verification=function(b){return this.each(function(){var c=a(this),d=c.data("verification");d||c.data("verification",d=new e(c,b))})},a.fn.verification.Constructor=e}(Zepto);
!function(a){a.webPageReg={body:/<body[^>]*>([\s\S]*)<\/body>/i,style:/<style[^>]*>([\s\S]*)<\/style>/i,script:/<script\b[^<]*(?:(?!<\/script)<[^>]*)*<\/script>/gi}}(Zepto);